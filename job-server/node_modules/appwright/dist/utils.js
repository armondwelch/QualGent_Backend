"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.boxedStep = boxedStep;
const test_1 = __importDefault(require("@playwright/test"));
function boxedStep(target, context) {
    return function replacementMethod(...args) {
        //@ts-ignore
        const path = this.path ? `("${this.path}")` : "";
        const argsString = args.length
            ? "(" +
                Array.from(args)
                    .map((a) => JSON.stringify(a))
                    .join(" , ") +
                ")"
            : "";
        const name = `${context.name}${path}${argsString}`;
        return test_1.default.step(name, async () => {
            // @ts-ignore
            return await target.call(this, ...args);
        }, { box: true }); // Note the "box" option here.
    };
}
